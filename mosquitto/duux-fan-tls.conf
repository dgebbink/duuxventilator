# Mosquitto extra listener for DUUX fan TLS interception.
# Drop this file into your Mosquitto conf.d/ directory.
#
# The DUUX fan connects to collector3.cloudgarden.nl:443 using MQTTS.
# After DNS redirection (collector3.cloudgarden.nl → 192.168.2.27) and
# Docker port mapping (host:443 → container:8883), the fan lands here.
#
# TLS notes:
#   - The fan does NOT verify the certificate chain or CN — any valid cert works.
#   - require_certificate false  → fan presents no client cert (one-way TLS).
#   - allow_anonymous true       → covers most firmware; see capture-credentials.sh
#                                  if your fan sends a username/password.

listener 8883 0.0.0.0

certfile /mosquitto/certs/collector3.cloudgarden.nl.crt
keyfile  /mosquitto/certs/collector3.cloudgarden.nl.key

require_certificate false
tls_version tlsv1.2

allow_anonymous true

# Logging — helps confirm the fan connected and shows its topics.
log_type all
